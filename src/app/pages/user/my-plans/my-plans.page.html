<ion-header class="ion-no-border">
  <ion-toolbar class="custom-toolbar" color="primary">
    <div class="header-container">
      <ion-title class="main-title">Mis Contrataciones</ion-title>
    </div>
  </ion-toolbar>
</ion-header>

<ion-content class="main-content">
  <div class="list-container ion-padding">
    
    <div *ngIf="contrataciones.length === 0" class="ion-text-center ion-padding-top">
        <p>Aún no tienes contrataciones registradas.</p>
        <ion-button [routerLink]="['/tabs/home']">Ver Planes</ion-button>
    </div>

    <ion-card *ngFor="let item of contrataciones" class="custom-card">
      <ion-card-content>
        <div class="card-top-row">
          <h2 class="plan-name">{{ item.planes_moviles.nombre }}</h2>
          
          <!-- El estado debe estar en minúsculas en la BD ('pendiente', 'aprobado', etc) -->
          <span class="status-badge" 
            [ngClass]="{
              'status-pendiente': item.estado === 'pendiente',
              'status-aprobado': item.estado === 'aprobado',
              'status-rechazado': item.estado === 'rechazado'
            }">
            {{ item.estado | uppercase }}
          </span>
        </div>

        <p class="plan-date">Fecha: {{ item.created_at | date:'yyyy-MM-dd' }}</p>

        <ion-button class="chat-btn" expand="block" (click)="irAlChat()">
          <ion-icon name="chatbubble" slot="start"></ion-icon>
          Chat con Asesor
        </ion-button>

      </ion-card-content>
    </ion-card>

  </div>
</ion-content>